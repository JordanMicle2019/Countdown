var head=document.getElementsByTagName("head")[0],script=document.createElement("script");function handler(){var t=[],e=[],n="",i="",a="",o=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];function s(t,e){t.parentNode.insertBefore(e,t.nextSibling)}function r(t){var e=t.split(":");return 60*+e[0]*60+60*+e[1]+ +e[2]}function c(t,e,n){if(currentWeekIndex=o.indexOf(e),eventWeekIndex=o.indexOf(t.day),currentWeekIndex==eventWeekIndex){var i=r(t.start_time+":00")-r(n);return i>=0?i:60*t.duration+i>=0?i:604800+i}return eventWeekIndex>currentWeekIndex?r(t.start_time+":00")+86400*(eventWeekIndex-currentWeekIndex)-r(n):r(t.start_time+":00")+86400*(eventWeekIndex-currentWeekIndex+7)-r(n)}function d(){var a=Math.min.apply(null,e);if(a>0)n=t[e.indexOf(a)];else if(0==a)console.log("some event started");else{var o=t[e.indexOf(a)];i=o}}var l=document.createElement("div");function u(){i="",n="",e=[],$("#frame-container").remove();var[a,o]=v();for(event of t)e.push(c(event,a.replace(/ /g,""),o));d(),$("#stream-selection-container").show(),i?(h(i),i.show_selection?($("#countdown-container").hide(),$("#selection-container").show(),$("#section-1").text(i.event[0].label),$("#section-2").text(i.event[1].label),$("#landing-video").hide()):m(i.event[0].src)):($("#landing-video").show(),$("#stream-selection-container").css({background:"transparent"}),$("#countdown-container").show(),$("#selection-container").hide(),$("#up_event_name").text(n.title),p(n))}function m(t){var e=document.createElement("div");e.id="frame-container",e.innerHTML=`\n\t\t\t\t\t<iframe id="player" width="100%" height="100%" src="${t}"\n\t\t\t\t\tonload="$pdk.bind(this, true); $pdk.controller.setIFrame(this, true);" frameborder="0" allow="autoplay"\n\t\t\t\t\tseamless="seamless" allowFullScreen></iframe>\t\t\t\t\n\t\t\t\t`,s(document.querySelector("#stream-selection-container"),e),$("#frame-container").width($("#stream-selection-container").width()),$("#frame-container").height($("#stream-selection-container").height()),$("#stream-selection-container").hide()}function p(t){var e=setInterval(function(){var[n,i]=v();distance=1e3*c(t,n,i);var[a,o,s,r]=function(t){var e=Math.floor(t/864e5),n=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4),a=Math.floor(t%6e4/1e3);return[e,n,i,a]}(distance);distance<0&&(clearInterval(e),u(),document.getElementById("countdown").innerHTML="");var d="";a&&(d+=1==a?`${a} <span class="mini">day </span>`:`${a} <span class="mini">days </span>`),o&&(d+=1==o?`${o} <span class="mini">hour </span>`:`${o} <span class="mini">hours </span>`),s&&(d+=1==s?`${s} <span class="mini">minute </span>`:`${s} <span class="mini">minutes </span>`),d+=1==r?`${r} <span class="mini">second </span>`:`${r} <span class="mini">seconds </span>`,document.getElementById("countdown").innerHTML=d},1e3)}function v(){return[(new Date).toLocaleString("en-US",{timeZone:"America/Chicago",weekday:"short"}),(new Date).toLocaleString("de-DE",{timeZone:"America/Chicago"}).split(",")[1]]}function h(t){var e=setInterval(function(){var n,i,[a,o]=v();distance=1e3*(n=function(t){var e=60*parseInt(t.start_time.split(":")[0])+parseInt(t.start_time.split(":")[1]),n=t.duration+e;return Math.floor(n/60)+":"+n%60}(t),i=o,r(n+":00")-r(i)),distance<0&&(clearInterval(e),u()),document.getElementById("countdown").innerHTML=""},1e3)}l.id="stream-selection-container",$(document).ready(function(){$.ajax({url:"https://jordanmicle2019.github.io/Countdown/config.json",cache:!1,dataType:"json",success:function(o){var[r,u]=v();for(event of(a=o.image_url,o.events))if(event.day.includes(",")){var f=event.day.split(",");for(day of f){var g={title:event.title,day:day.replace(/ /g,""),start_time:event.start_time,duration:event.duration,show_selection:event.show_selection,event:event.event};e.push(c(g,r.replace(/ /g,""),u)),t.push(g)}}else e.push(c(event,r.replace(/ /g,""),u)),t.push(event);d();var w='\n\t\t\t\t\t<div id="countdown-container" class="display-top" style="width:100%">\n\t\t\t\t\t\t<p class="custom-font-style" style="margin-bottom: -10px">Coming Up Next: <span id="up_event_name"></span></p>\n\t\t\t\t\t\t\t<p class="custom-font-style">Begins in: <span id="countdown"></span></p>\n\t\t\t\t\t\t</div>\t\t\t\t\n\t\t\t\t\t\t<div id="selection-container" class="display-top">\n\t\t\t\t\t\t\t<div style="width: 100%;height: 100%;background: #312020a1;border-radius:5px">\n\t\t\t\t\t\t\t\t<p class="custom-font-style" style="padding: 10px;text-align: center;border-bottom: 1px solid white;margin-left: 20px;margin-right: 20px;">Choose Your Service Preference</p>\n\t\t\t\t\t\t\t\t<div class="custom-center" style="margin-top: 15%;">\n\t\t\t\t\t\t\t\t\t<div class="section-1 btn-container custom-center">\n\t\t\t\t\t\t\t\t\t\t<button id="section-1" class="custom-btn"></button>\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="section-2 btn-container custom-center">\n\t\t\t\t\t\t\t\t\t\t<button id="section-2" class="custom-btn"></button>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t';if(o.isVideo){var y=`\n\t\t\t\t\t\t<video id="landing-video" autoplay muted loop class="bg-video" style="max-width:100%;max-height:100%;position:absolute;top:0;z-index:1">\n\t\t\t\t\t\t\t<source src="${o.video_url}" type="video/mp4" />\n\t\t\t\t\t\t</video>\n\t\t\t\t\t`;l.innerHTML=w+y,s(document.querySelector("iframe"),l)}else l.innerHTML=w,s(document.querySelector("iframe"),l);$("#selection-container").css({background:"url("+a+")","background-repeat":"no-repeat","background-size":"100%","max-width":"100%"}),$("#stream-selection-container").width($("iframe").width()),$("#stream-selection-container").height($("iframe").height()),$("iframe").remove(),i?(h(i),i.show_selection?($("#countdown-container").hide(),$("#selection-container").show(),$("#section-1").text(i.event[0].label),$("#section-2").text(i.event[1].label),$("#landing-video").hide()):m(i.event[0].src)):($("#landing-video").show(),$("#stream-selection-container").css({background:"transparent"}),$("#countdown-container").show(),$("#selection-container").hide(),$("#up_event_name").text(n.title),p(n))}})}),$(window).resize(function(){$("#stream-selection-container").width($("iframe").width()),$("#stream-selection-container").height($("iframe").height())}),$(document).on("click","#section-1",function(){m(i.event[0].src)}),$(document).on("click","#section-2",function(){m(i.event[1].src)})}script.type="text/javascript",script.src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js",script.onreadystatechange=handler,script.onload=handler,head.appendChild(script);